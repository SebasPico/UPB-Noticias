<%- include('partials/navbar') %>
<% if (!news || news.length === 0) { %>
  <p>No hay noticias publicadas todavía.</p>
<% } else { %>
  <style>
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 1.25rem; }
    article { background: #111827; border: 1px solid #1f2937; border-radius: 12px; padding: 1rem; }
    article img { width: 100%; height: 240px; object-fit: cover; border-radius: 8px; margin: .5rem 0 1rem; }
    .scroll-content { max-height: 220px; overflow-y: auto; padding-right: 4px; }
  </style>
  <div class="grid">
    <% news.forEach(function(item){ %>
      <article>
        <h2><%= item.title %></h2>
        <div class="meta">
          Publicado: <%= new Date(item.publishedAt).toLocaleString('es-ES') %><br/><br/>
          Estudiantes: <%= item.students %>
          • Profesor: <%= item.professor %>
          • Asignatura: <%= item.subject %>
        </div>
        <div class="scroll-content">
          <p><%= item.content %></p>
          <% if (item.comments) { %>
            <p>Comentarios: <%= item.comments %></p>
          <% } %>
        </div>
        <% if (item.imageBase64) { %>
          <img src="data:image/*;base64,<%= item.imageBase64 %>" alt="imagen de la noticia" />
        <% } %>
      </article>
    <% }) %>
  </div>
<% } %>